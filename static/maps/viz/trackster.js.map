{"version":3,"file":"trackster.js","sources":["../../src/viz/trackster.js"],"names":["ui","view","browser_router","require","mod_utils","cssLoadFile","define","_","tracks","visualization","mod_icon_btn","query_string","Base","this","initialize","apply","arguments","extend","Backbone","Model","TracksterUI","baseURL","save_viz","Galaxy","modal","show","title","body","bookmarks","$","each","push","position","children","text","annotation","overview_track_name","overview_drawable","config","get_value","viz_config","to_dict","viewport","chrom","start","low","end","high","overview","ajax","url","root","type","dataType","data","id","vis_id","dbkey","vis_json","JSON","stringify","success","vis_info","hide","has_changes","window","history","pushState","location","hash","error","buttons","Cancel","createButtonMenu","self","menu","create_icon_buttons_menu","icon_class","on_click","select_datasets","f-dbkey","new_tracks","track","add_drawable","object_from_template","DrawableGroup","name","force_right_panel","css","export_menu","handle_unsaved_changes","tooltip_config","placement","buttonMenu","add_bookmarks","alert","table_html","Insert","first","val","attr","hda_id","ldda_id","then","i","length","row","add_bookmark","editable","bookmarks_container","new_bookmark","addClass","appendTo","position_div","annotation_div","click","go_to","delete_icon_container","prependTo","slideUp","remove","make_text_editable","num_rows","use_textarea","help_text","create_visualization","view_config","viewport_config","drawables_config","bookmarks_config","TracksterView","header","editor","when","load_chroms_deferred","chrom_info","overview_drawable_name","undefined","change_chrom","drawables","set_overview","bookmark","set_up_router","options","TrackBrowserRouter","init_keyboard_nav","document","keyup","e","srcElement","is","which","move_fraction","Math","round","viewport_container","height","scrollTop","Leave without Saving","off","Save","View","$el","append","resize_window","galaxy_config","app","view_existing","get","choose_existing_or_new","view_new","listTracksParams","dataset_params","dataset_id","hda_ldda","param","view_in_saved","show_choice","Add to visualization","parent","find","View in saved visualization","View in new visualization","container","init_editor","response","template_view_new","Create","create_browser","dbkeys_in_genomes","map","r","default_dbkey","contains","focus","select2","html","trigger","gene_region","add_dataset","data_type","track_data","on","GalaxyApp"],"mappings":"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"}